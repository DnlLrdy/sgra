<div th:fragment="modalCrearConductor">
    <div class="modal fade" id="modalCrearConductor" tabindex="-1" aria-labelledby="modalCrearConductorLabel"
        aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content rounded-4 shadow-sm border-0">

                <div class="modal-header bg-white border-bottom-0">
                    <h5 class="modal-title text-info-emphasis fw-semibold" id="modalCrearConductorLabel">
                        <i class="bi bi-person-plus me-2"></i> Registrar Conductor
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>

                <form th:action="@{/admin/conductores/guardar}" method="post" th:object="${conductorDTO}">

                    <div class="modal-body text-muted fs-6">
                        <div id="step1">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="primerNombre" class="form-label">Primer Nombre</label>
                                    <div class="input-wrapper">
                                        <i class="fas fa-user input-icon"></i>
                                        <input type="text" id="primerNombre" name="primerNombre" class="form-control"
                                            th:field="*{primerNombreDTO}" placeholder="Ingrese el primer nombre">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="segundoNombre" class="form-label">Segundo Nombre</label>
                                    <div class="input-wrapper">
                                        <i class="fas fa-user input-icon"></i>
                                        <input type="text" id="segundoNombre" name="segundoNombre" class="form-control"
                                            th:field="*{segundoNombreDTO}" placeholder="Ingrese el segundo nombre">
                                    </div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="primerApellido" class="form-label">Primer Apellido</label>
                                    <div class="input-wrapper">
                                        <i class="fas fa-user input-icon"></i>
                                        <input type="text" id="primerApellido" name="primerApellido"
                                            class="form-control" th:field="*{primerApellidoDTO}"
                                            placeholder="Ingrese el primer apellido">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="segundoApellido" class="form-label">Segundo Apellido</label>
                                    <div class="input-wrapper">
                                        <i class="fas fa-user input-icon"></i>
                                        <input type="text" id="segundoApellido" name="segundoApellido"
                                            class="form-control" th:field="*{segundoApellidoDTO}"
                                            placeholder="Ingrese el segundo apellido">
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="fechaNacimiento" class="form-label">Fecha de Nacimiento</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-calendar-alt input-icon"></i>
                                    <input type="date" id="fechaNacimiento" name="fechaNacimiento" class="form-control"
                                        th:field="*{fechaNacimientoDTO}">
                                </div>
                            </div>
                        </div>

                        <div id="step2" class="d-none">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="tipoDocumento" class="form-label">Tipo de Documento</label>
                                    <div class="input-wrapper">
                                        <i class="fas fa-id-card input-icon"></i>
                                        <select id="tipoDocumento" name="tipoDocumento" class="form-select form-control"
                                            th:field="*{tipoDocumentoDTO}">
                                            <option value="CC">Cédula de Ciudadanía</option>
                                            <option value="CE">Cédula de Extranjería</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="numeroDocumento" class="form-label">Número de Documento</label>
                                    <div class="input-wrapper">
                                        <i class="fas fa-file-alt input-icon"></i>
                                        <input type="number" id="numeroDocumento" name="numeroDocumento"
                                            class="form-control" th:field="*{numeroDocumentoDTO}"
                                            placeholder="Ingrese el número de documento">
                                    </div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="numeroLicencia" class="form-label">Número de Licencia</label>
                                    <div class="input-wrapper">
                                        <i class="fas fa-id-card input-icon"></i>
                                        <input type="number" id="numeroLicencia" name="numeroLicencia"
                                            class="form-control" th:field="*{numeroLicenciaDTO}"
                                            placeholder="Ingrese el número de licencia">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="fechaVencimientoLicencia" class="form-label">Fecha de
                                        Vencimiento</label>
                                    <div class="input-wrapper">
                                        <i class="fas fa-calendar-check input-icon"></i>
                                        <input type="date" id="fechaVencimientoLicencia" name="fechaVencimientoLicencia"
                                            class="form-control" th:field="*{fechaVencimientoLicenciaDTO}">
                                    </div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="correoElectronico" class="form-label">Correo Electrónico</label>
                                    <div class="input-wrapper">
                                        <i class="fas fa-envelope input-icon"></i>
                                        <input type="text" id="correoElectronico" name="correoElectronico"
                                            class="form-control" th:field="*{correoElectronicoDTO}"
                                            placeholder="Ingrese el correo electrónico">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="telefono" class="form-label">Teléfono</label>
                                    <div class="input-wrapper">
                                        <i class="fas fa-phone input-icon"></i>
                                        <input type="number" id="telefono" name="telefono" class="form-control"
                                            th:field="*{telefonoDTO}" placeholder="Ingrese el teléfono">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="step3" class="d-none">
                            <div class="form-group">
                                <label for="nombreUsuario" class="form-label">Nombre de Usuario</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-user input-icon"></i>
                                    <input type="text" id="nombreUsuario" name="nombreUsuario" class="form-control"
                                        th:field="*{nombreUsuarioDTO}" placeholder="Ingrese el nombre de usuario">
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="contraseña" class="form-label">Contraseña</label>
                                    <div class="input-wrapper password-wrapper">
                                        <i class="fas fa-lock input-icon"></i>
                                        <input type="text" id="contraseña" name="contraseña" class="form-control"
                                            th:field="*{contraseñaDTO}" placeholder="Ingrese la contraseña">
                                        <i class="fas fa-eye password-toggle-icon" id="togglePassword"></i>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="confirmarContraseña" class="form-label">Confirmar Contraseña</label>
                                    <div class="input-wrapper password-wrapper">
                                        <i class="fas fa-lock input-icon"></i>
                                        <input type="text" id="confirmarContraseña" name="confirmarContraseña"
                                            class="form-control" th:field="*{confirmarContraseñaDTO}"
                                            placeholder="Confirme la contraseña">
                                        <i class="fas fa-eye password-toggle-icon" id="toggleConfirmPassword"></i>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="modal-footer border-top-0 d-flex justify-content-between" id="modalFooter">
                            <div id="footerLeft">
                                <button type="button" class="btn btn-outline-secondary rounded-pill px-4 d-none"
                                    id="prevButton">Regresar</button>
                            </div>
                            <div id="footerRight">
                                <button type="button" class="btn btn-success rounded-pill px-4"
                                    id="nextButton">Siguiente</button>
                                <button type="submit" class="btn btn-success rounded-pill px-4 d-none"
                                    id="submitButton">Guardar</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div th:fragment="modalEditarConductor">
    <div class="modal fade" id="modalEditarConductor" tabindex="-1" aria-labelledby="modalEditarConductorLabel"
        aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content rounded-4 shadow-sm border-0">

                <div class="modal-header bg-white border-bottom-0">
                    <h5 class="modal-title text-warning fw-semibold" id="modalEditarConductorLabel">
                        <i class="bi bi-pencil-square me-2"></i> Editar Conductor
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>


                <form th:action="@{/admin/conductores/actualizar}" method="post" th:object="${editarConductorDTO}">
                    <input type="hidden" id="conductor-id-edit" name="id" th:field="*{idDTO}" />

                    <div class="modal-body text-muted fs-6">
                        <div id="editStep1">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Primer Nombre</label>
                                    <div class="input-wrapper">
                                        <i class="fas fa-user input-icon"></i>
                                        <input type="text" id="conductor-primerNombre-edit" class="form-control"
                                            th:field="*{primerNombreDTO}" placeholder="Ingrese el primer nombre">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Segundo Nombre</label>
                                    <div class="input-wrapper">
                                        <i class="fas fa-user input-icon"></i>
                                        <input type="text" id="conductor-segundoNombre-edit" class="form-control"
                                            th:field="*{segundoNombreDTO}" placeholder="Ingrese el segundo nombre">
                                    </div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Primer Apellido</label>
                                    <div class="input-wrapper">
                                        <i class="fas fa-user input-icon"></i>
                                        <input type="text" id="conductor-primerApellido-edit" class="form-control"
                                            th:field="*{primerApellidoDTO}" placeholder="Ingrese el primer apellido">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Segundo Apellido</label>
                                    <div class="input-wrapper">
                                        <i class="fas fa-user input-icon"></i>
                                        <input type="text" id="conductor-segundoApellido-edit" class="form-control"
                                            th:field="*{segundoApellidoDTO}" placeholder="Ingrese el segundo apellido">
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Fecha de Nacimiento</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-calendar-alt input-icon"></i>
                                    <input type="date" id="conductor-fechaNacimiento-edit" class="form-control"
                                        th:field="*{fechaNacimientoDTO}">
                                </div>
                            </div>
                        </div>

                        <div id="editStep2" class="d-none">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Tipo de Documento</label>
                                    <div class="input-wrapper">
                                        <i class="fas fa-id-card input-icon"></i>
                                        <select id="conductor-tipoDocumento-edit" class="form-select form-control"
                                            th:field="*{tipoDocumentoDTO}">
                                            <option value="CC">Cédula de Ciudadanía</option>
                                            <option value="CE">Cédula de Extranjería</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Número de Documento</label>
                                    <div class="input-wrapper">
                                        <i class="fas fa-file-alt input-icon"></i>
                                        <input type="number" id="conductor-numeroDocumento-edit" class="form-control"
                                            th:field="*{numeroDocumentoDTO}"
                                            placeholder="Ingrese el número de documento">
                                    </div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Número de Licencia</label>
                                    <div class="input-wrapper">
                                        <i class="fas fa-id-card input-icon"></i>
                                        <input type="number" id="conductor-numeroLicencia-edit" class="form-control"
                                            th:field="*{numeroLicenciaDTO}" placeholder="Ingrese el número de licencia">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Fecha de Vencimiento</label>
                                    <div class="input-wrapper">
                                        <i class="fas fa-calendar-check input-icon"></i>
                                        <input type="date" id="conductor-fechaVencimiento-edit" class="form-control"
                                            th:field="*{fechaVencimientoLicenciaDTO}">
                                    </div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Correo Electrónico</label>
                                    <div class="input-wrapper">
                                        <i class="fas fa-envelope input-icon"></i>
                                        <input type="text" id="conductor-correoElectronico-edit" class="form-control"
                                            th:field="*{correoElectronicoDTO}"
                                            placeholder="Ingrese el correo electrónico">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Teléfono</label>
                                    <div class="input-wrapper">
                                        <i class="fas fa-phone input-icon"></i>
                                        <input type="number" id="conductor-telefono-edit" class="form-control"
                                            th:field="*{telefonoDTO}" placeholder="Ingrese el teléfono">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="editStep3" class="d-none">
                            <div class="form-group">
                                <label class="form-label">Nombre de Usuario</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-user input-icon"></i>
                                    <input type="text" id="conductor-nombreUsuario-edit" class="form-control"
                                        th:field="*{nombreUsuarioDTO}" placeholder="Ingrese el nombre de usuario">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="modal-footer border-top-0 d-flex justify-content-between" id="modalFooterEditar">
                        <div>
                            <button type="button" class="btn btn-outline-secondary rounded-pill d-none"
                                id="prevButtonEditar">Regresar</button>
                        </div>
                        <div>
                            <button type="button" class="btn btn-warning rounded-pill"
                                id="nextButtonEditar">Siguiente</button>
                            <button type="submit" class="btn btn-warning rounded-pill d-none"
                                id="submitButtonEditar">Actualizar</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div th:fragment="modalEliminarConductor">
    <div class="modal fade" id="modalConfirmarEliminarConductor" tabindex="-1"
        aria-labelledby="modalEliminarConductorLabel" aria-hidden="true" data-bs-backdrop="static"
        data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content rounded-4 shadow-sm border-0">

                <div class="modal-header bg-white border-bottom-0">
                    <h5 class="modal-title text-danger-emphasis fw-semibold" id="modalEliminarConductorLabel">
                        <i class="fas fa-trash-alt me-2 text-danger"></i>Eliminar conductor
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>

                <form th:action="@{/admin/conductores/eliminar}" method="post">

                    <input type="hidden" name="id" id="conductorIdEliminar">

                    <div class="modal-body text-muted fs-6">
                        ¿Estás seguro de que deseas eliminar este conductor?
                        <div class="mt-1 small text-secondary">
                            Esta acción no se puede deshacer.
                        </div>
                    </div>

                    <div class="modal-footer border-top-0 d-flex justify-content-between">
                        <button type="button" class="btn btn-outline-secondary rounded-pill px-4"
                            data-bs-dismiss="modal">Cancelar</button>
                        <button type="submit" class="btn btn-danger rounded-pill px-4"></i>Eliminar
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div th:fragment="registroErrorModal">
    <div class="modal fade" id="registroErrorModal" tabindex="-1" aria-labelledby="registroErrorModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content rounded-4 shadow-sm border-0">
                <div class="modal-header border-bottom-0">
                    <h5 class="modal-title fw-semibold text-danger" id="registroErrorModalLabel">
                        <i class="fas fa-triangle-exclamation text-danger me-2"></i> Errores
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>

                <div class="modal-body text-muted fs-6">
                    <ul id="registroErrorMessage" class="list-unstyled mb-0">
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>